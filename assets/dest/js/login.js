(()=>{"use strict";var e={"./assets/src/js/modules/update-profile-after-signup-with-otp.js":
  /*!***********************************************************************!*\
    !*** ./assets/src/js/modules/update-profile-after-signup-with-otp.js ***!
    \***********************************************************************/(e,t,n)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function r(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=o(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}n.r(t),n.d(t,{default:()=>i});var i=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.class=document.getElementById("profile-update__class"),this.gender=document.getElementById("profile-update__gender"),this.religion=document.getElementById("profile-update__relegion"),this.home_district=document.getElementById("profile-update__home-district"),this.date_of_birth=document.getElementById("profile-update__date-of-birth"),this.message=document.getElementById("update-profile-message"),this.update_profile_btn=document.getElementById("update-profile-btn"),this.class&&this.events()},(t=[{key:"events",value:function(){var e=this;this.date_of_birth.addEventListener("click",(function(){this.showPicker()})),this.update_profile_btn.addEventListener("click",(function(){e.check_inputs_has_data()})),this.class.addEventListener("change",(function(){e.class.style.border="2px solid green"})),this.class.addEventListener("change",(function(){e.class.style.border="2px solid green"})),this.gender.addEventListener("change",(function(){e.gender.style.border="2px solid green"})),this.religion.addEventListener("change",(function(){e.religion.style.border="2px solid green"})),this.home_district.addEventListener("change",(function(){e.home_district.style.border="2px solid green"})),this.date_of_birth.addEventListener("change",(function(){e.date_of_birth.style.border="2px solid green"}))}},{key:"check_inputs_has_data",value:function(){var e=!0;"0"==this.class.value&&(this.class.style.border="1px solid red",e=!1),"0"==this.gender.value&&(this.gender.style.border="1px solid red",e=!1),"0"==this.religion.value&&(this.religion.style.border="1px solid red",e=!1),"0"==this.home_district.value&&(this.home_district.style.border="1px solid red",e=!1),""===this.date_of_birth.value&&(this.date_of_birth.style.border="1px solid red",e=!1),e&&this.send_update_profile_request()}},{key:"send_update_profile_request",value:function(){var e=this;this.update_profile_btn.innerHTML='<div class="loading-spinner"></div>';var t=localStorage.getItem("gsp_otp_code"),n=localStorage.getItem("gsp_phone_number"),o=localStorage.getItem("gsp_ui_kit_password");fetch(gsp_ui_kit_common.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"gsp_ui_kit_update_profile_by_phone_otp",otp_code:t,phone_number:n,class:this.class.value,gender:this.gender.value,religion:this.religion.value,home_district:this.home_district.value,date_of_birth:this.date_of_birth.value,password:o,nonce:gsp_ui_kit_common.nonce})}).then((function(e){return console.log(e),e.json()})).then((function(t){var n,o;if(t.success)return e.message.innerHTML=null!==(n=t.data.message)&&void 0!==n?n:"",e.message.style.color="green",location.replace(gsp_ui_kit_common.site_url),e.update_profile_btn.classList.add("-d-none"),void localStorage.setItem("gsp_ui_kit_password","");e.message.innerHTML=null!==(o=t.data.error)&&void 0!==o?o:"",e.update_profile_btn.innerHTML="Update Profile",console.log(t)})).catch((function(t){console.log(t),e.update_profile_btn.innerHTML="Update Profile"}))}}])&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{
  /*!*************************************************!*\
    !*** ./assets/src/js/modules/login-with-otp.js ***!
    \*************************************************/
  n.r(o);var e=n(/*! ./update-profile-after-signup-with-otp */"./assets/src/js/modules/update-profile-after-signup-with-otp.js");function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function r(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var s=o.call(e,n||"default");if("object"!=t(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}var i=function(){return e=function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.section=document.getElementById("gsp-login-with-otp-section"),this.section){this.login_signup_section=document.querySelector(".login-signup-section"),this.login_form=document.querySelector(".login-form"),this.signup_form=document.querySelector(".signup-form"),this.forget_password_form=document.querySelector(".forget-password-form"),this.login_form_tab=document.querySelector(".login-form-tab"),this.signup_form_tab=document.querySelector(".signup-form-tab"),this.signup_form_tab2=document.querySelector(".signup-form-tab-2"),this.form_title=document.querySelector(".form-title"),this.login_phone_number=document.querySelector(".-login-phone-number"),this.login_password=document.querySelector(".-login-password"),this.login_message=document.getElementById("-login-message"),this.redirect_after_login=document.getElementById("-redirect-after-login"),this.redirect_after_signup=document.getElementById("-redirect-after-signup"),this.signup_name=document.querySelector(".signup-name"),this.signup_phone_number=document.querySelector(".signup-phone-number"),this.signup_otp_code=document.querySelector(".signup-otp-code"),this.signup_message=document.querySelector(".signup-message"),this.forgotten_phone_number=document.querySelector(".-forgotten-number"),this.forgotten_otp=document.querySelector(".-forgotten-otp"),this.password=document.querySelector(".-forgotten-password"),this.confirm_password=document.querySelector(".-forgotten-confirm-password"),this.forgotten_message=document.querySelector(".-forgotten-password-message"),this.form_input__name=document.querySelector(".-from-input__name"),this.form_input__phone=document.querySelector(".-from-input__phone"),this.form_input__otp=document.querySelector(".-form-input__otp"),this.forgotton_number_box=document.querySelector(".-input-form__forgotten-number"),this.forgotton_number_otp_box=document.querySelector(".-input-form__forgotten-number-otp"),this.login_btn=document.querySelector(".-login-btn"),this.signup_btn=document.querySelector(".-signup-btn"),this.verify_otp_btn=document.querySelector(".-verify-otp-btn"),this.forget_password_btn=document.querySelector(".-forget-password-btn"),this.request_new_password_btn=document.querySelector(".-request-new-password-btn"),this.update_password_btn=document.querySelector(".-update-password-btn"),this.back_to_login_btn=document.querySelector(".-back-to-login-btn");var t=localStorage.getItem("rememberPassword");t&&(this.login_password.value=t);var n=localStorage.getItem("rememberPhoneNumber");n&&(this.login_phone_number.value=n),this.events()}},(t=[{key:"events",value:function(){var e=this;this.login_form_tab.addEventListener("click",(function(){return e.form_visiability(!0)})),this.signup_form_tab.addEventListener("click",(function(){return e.form_visiability(!1)})),this.signup_form_tab2.addEventListener("click",(function(){return e.form_visiability(!1)})),this.login_btn.addEventListener("click",(function(){return e.send_login_request()})),this.signup_btn.addEventListener("click",(function(){e.send_signup_request()})),this.verify_otp_btn.addEventListener("click",(function(){return e.send_signup_otp_verification_request()})),this.signup_phone_number.addEventListener("keydown",(function(){e.signup_message.innerHTML=""})),this.forget_password_btn.addEventListener("click",(function(){e.show_forgotten_form(!0),e.form_title.innerHTML="Do you want to recover your password?"})),this.back_to_login_btn.addEventListener("click",(function(){e.show_forgotten_form(!1),e.form_title.innerHTML="Welcome to login"})),this.request_new_password_btn.addEventListener("click",(function(){e.send_forget_password_request()})),this.update_password_btn.addEventListener("click",(function(){e.send_password_update_request()})),this.forgotten_phone_number.addEventListener("keydown",(function(){e.forgotten_message.innerHTML=""}))}},{key:"form_visiability",value:function(e){e?(this.signup_form.classList.add("-d-none"),this.signup_form_tab.classList.remove("-acitve-tab"),this.login_form_tab.classList.add("-acitve-tab"),this.login_form.classList.remove("-d-none"),this.form_title.innerHTML="Welcome to login"):(this.login_form_tab.classList.remove("-acitve-tab"),this.login_form.classList.add("-d-none"),this.signup_form.classList.remove("-d-none"),this.signup_form_tab.classList.add("-acitve-tab"),this.form_title.innerHTML="Welcome to create account")}},{key:"show_forgotten_form",value:function(e){e?(this.login_signup_section.classList.add("-d-none"),this.forget_password_form.classList.remove("-d-none"),this.forgotton_number_box.classList.remove("-d-none"),this.forgotton_number_otp_box.classList.add("-d-none"),this.request_new_password_btn.classList.remove("-d-none"),this.update_password_btn.classList.add("-d-none")):(this.forget_password_form.classList.add("-d-none"),this.forgotton_number_box.classList.remove("-d-none"),this.forgotton_number_otp_box.classList.add("-d-none"),this.login_signup_section.classList.remove("-d-none"),this.request_new_password_btn.classList.remove("-d-none"),this.update_password_btn.classList.add("-d-none"))}},{key:"send_login_request",value:function(){var e=this;this.login_btn.innerHTML='<div class="loading-spinner"></div>';var t=document.getElementById("remember-password");this.login_message.innerHTML="",t.checked&&(localStorage.setItem("rememberPassword",this.login_password.value),localStorage.setItem("rememberPhoneNumber",this.login_phone_number.value)),console.log(this.login_phone_number.value),console.log(this.login_password.value),fetch(gsp_ui_kit_common.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"gsp_ui_kit_login",username:this.login_phone_number.value,password:this.login_password.value,nonce:gsp_ui_kit_common.nonce})}).then((function(e){return e.json()})).then((function(t){t.success?(console.log(t.data),e.login_btn.innerHTML="লগইন করুন",e.login_message.innerHTML="লগইন সফল হয়েছে!",e.login_message.style.color="green",location.replace(e.redirect_after_login.value)):(e.login_message.innerHTML="লগইন সম্পূর্ন হয়নি!",e.login_message.style.color="red"),e.login_btn.innerHTML="লগইন করুন",console.log(t)})).catch((function(t){console.error("AJAX error:",t),e.login_message.innerHTML="Something went worng, please try again later.",e.login_message.style.color="red",e.login_btn.innerHTML="লগইন করুন"}))}},{key:"send_signup_request",value:function(){var e=this,t=this.signup_phone_number.value.replace(/[^0-9]/g,"");return this.signup_phone_number.value=t,11!=t.length?(this.signup_message.innerHTML="Invalid phone number",void(this.signup_message.style.color="red")):""==this.signup_name.value?(this.signup_message.innerHTML="Name can not be empty!",void(this.signup_message.style.color="red")):(this.signup_btn.innerHTML='<div class="loading-spinner"></div>',this.signup_btn.disabled=!0,void fetch(gsp_ui_kit_common.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"gsp_ui_kit_signup_with_otp",phone_number:t,name:this.signup_name.value,nonce:gsp_ui_kit_common.nonce})}).then((function(e){var t=e.headers.get("content-type");if(t&&t.includes("application/json"))return e.json()})).then((function(t){var n,o;t.success?(e.form_input__name.classList.add("-d-none"),e.form_input__phone.classList.add("-d-none"),e.form_input__otp.classList.remove("-d-none"),e.signup_btn.classList.add("-d-none"),e.verify_otp_btn.classList.remove("-d-none"),e.signup_message.innerHTML=null!==(n=t.data.message)&&void 0!==n?n:"",e.signup_message.style.color="black"):(e.signup_message.innerHTML=null!==(o=t.data.error)&&void 0!==o?o:"",e.signup_message.style.color="red"),console.log(t),e.signup_btn.innerHTML="একাউন্ট তৈরি করুন"})).catch((function(t){console.error(t),e.signup_btn.innerHTML="একাউন্ট তৈরি করুন",e.signup_message.innerHTML="Something went wrong! , Please contact with us.",e.signup_btn.disabled=!1})))}},{key:"send_signup_otp_verification_request",value:function(){var e=this;this.verify_otp_btn.innerHTML='<div class="loading-spinner"></div>',this.verify_otp_btn.disabled=!0,fetch(gsp_ui_kit_common.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"gsp_ui_kit_signup_otp_verification",otp_code:this.signup_otp_code.value,phone_number:this.signup_phone_number.value,security:gsp_ui_kit_common.nonce})}).then((function(e){var t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():(console.log(e.text()),e.text())})).then((function(t){var n,o,s;t.success?(e.signup_message.innerHTML=null!==(n=t.data.message)&&void 0!==n?n:"",e.signup_message.style.color="black",localStorage.setItem("gsp_otp_code",e.signup_otp_code.value),localStorage.setItem("gsp_phone_number",e.signup_phone_number.value),localStorage.setItem("gsp_ui_kit_password",null!==(o=t.data.password)&&void 0!==o?o:""),location.replace(gsp_ui_kit_common.site_url+"/login?phone-number="+e.signup_phone_number.value+"&otp="+e.signup_otp_code.value)):(e.signup_message.innerHTML=null!==(s=t.data.error)&&void 0!==s?s:"",e.verify_otp_btn.disabled=!1),console.log(t),e.verify_otp_btn.innerHTML="ওটিপি কোড ভেরিফাই করুন"})).catch((function(t){var n;console.error("otp verification error"+t),e.verify_otp_btn.innerHTML=null!==(n=data.data.error)&&void 0!==n?n:"Something went wrong",e.verify_otp_btn.disabled=!1}))}},{key:"send_forget_password_request",value:function(){var e=this;11==this.forgotten_phone_number.value.length?(this.forgotten_message.innerHTML="",this.request_new_password_btn.innerHTML='<div class="loading-spinner"></div>',fetch(gsp_ui_kit_common.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"gsp_ui_kit_forget_password",phone_number:this.forgotten_phone_number.value,nonce:gsp_ui_kit_common.nonce})}).then((function(e){return e.json()})).then((function(t){var n;t.success?(e.forgotton_number_box.classList.add("-d-none"),e.forgotton_number_otp_box.classList.remove("-d-none"),e.request_new_password_btn.classList.add("-d-none"),e.update_password_btn.classList.remove("-d-none")):e.forgotten_message.innerHTML=null!==(n=t.data.error)&&void 0!==n?n:"",console.log(t),e.request_new_password_btn.innerHTML="Request New Password"})).catch((function(t){console.error(t),e.request_new_password_btn.innerHTML="Request New Password"}))):this.forgotten_message.innerHTML="Invalid Phone Number"}},{key:"send_password_update_request",value:function(){var e=this;""!=this.forgotten_otp.value?""!=this.password.value?this.password.value===this.confirm_password.value?(this.update_password_btn.innerHTML='<div class="loading-spinner"></div>',fetch(gsp_ui_kit_common.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"gsp_ui_kit_update_password_by_phone_otp",phone_number:this.forgotten_phone_number.value,otp_code:this.forgotten_otp.value,password:this.password.value,nonce:gsp_ui_kit_common.nonce})}).then((function(e){return e.json()})).then((function(t){var n,o;t.success?(e.forgotten_message.innerHTML=null!==(n=t.data.message)&&void 0!==n?n:"No response",localStorage.getItem("gsp_ui_kit_password",t.data.password)):e.forgotten_message.innerHTML=null!==(o=t.data.error)&&void 0!==o?o:"Something went wrong",console.log(t),e.update_password_btn.innerHTML="Update Password"})).catch((function(t){console.error(t),e.update_password_btn.innerHTML="Update Password"}))):this.forgotten_message.innerHTML="Password did not match":this.forgotten_message.innerHTML="Please enter a new password":this.forgotten_message.innerHTML="Please enter OTP code"}}])&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();document.addEventListener("DOMContentLoaded",(function(){new i,new e.default}))})()})();